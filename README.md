***
## Принцип работы
- Из netbox считываются данные по микротикам VM's и Devices. Должен быть tag mikrotik и primary IP
- Подключаемся к микротикам по ssh с помощью scrapli, асинхронный режим заработал не на всех серверах, поэтому стандартный ssh
- На микротиках создаем локальные файлы бэкапа конфигурации, bin и export. Имена везде одинаковые, заданы в качестве переменной в скрипте. Если файлы уже были, то они перезаписываются
- Качаем с помощью scp файлы на локальный сервер в директории по имени маршрутизатора. На локальном сервере всегда лежат последние актуальные файлы бэкапа
- Копируем полученные файлы в GCP bucket, где создаются директории под каждый маршрутизатор и дальше репозитарии по датам
- Пушим изменения в Git. В Git лежат последние актуальны файлы export с историей изменений. Bin не пушатся, т.к. в gitignore стоит исключение для разрешения *backup
***
внутри скрипта заменить переменные. необходим будет ключ из GCP с правами на бакеты и ssh серттикат для подключения к микротикам# backup_mikrotik_from_netbox